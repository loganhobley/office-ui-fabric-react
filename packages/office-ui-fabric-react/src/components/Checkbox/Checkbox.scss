@import '../../common/common';
@import './Checkbox.Tokens';

// Copyright (c) Microsoft. All rights reserved. Licensed under the MIT license. See LICENSE in the project root for license information.

//
// Office UI Fabric
// --------------------------------------------------
// Checkbox styles

$ms-checkbox-label-size: 20px;
$ms-checkbox-transition-duration: 200ms;
$ms-checkbox-transition-timing: cubic-bezier(.4, 0, .23, 1);
$ms-checkbox-highContrast-iconBoxSize: 16px;

@mixin highContrast-border($active-color, $bw-color, $size: 2px) {
  @media screen and (-ms-high-contrast: active) {
    border: $size solid $active-color;
  }

  @media screen and (-ms-high-contrast: black-on-white) {
    border: $size solid $bw-color;
  }
}

@mixin highContrast-color($active-color, $bw-color) {
  @media screen and (-ms-high-contrast: active) {
    color: $active-color;
  }

  @media screen and (-ms-high-contrast: black-on-white) {
    color: $bw-color;
  }
}

:global {

  .ms-Checkbox {
    box-sizing: border-box;
    font-family: $ms-font-family-base;
    font-size: $ms-font-size-m;
    font-weight: $ms-font-weight-regular;
    min-height: 36px;
    position: relative;

    .ms-Label {
      color: $checkbox-text-default-fg;
      font-size: $ms-font-size-m;
      @include padding(0, 0, 0, 26px);
      display: inline-block;
    }
  }

  // The hidden input
  .ms-Checkbox-input {
    position: absolute;
    opacity: 0;
    top: 8px
  }

  // The checkbox square container
  .ms-Checkbox-label::before {
    content: '';
    display: inline-block;
    border: 1px solid $checkbox-check-default-border;
    width: $ms-checkbox-label-size;
    height: $ms-checkbox-label-size;
    font-weight: normal;
    position: absolute;
    box-sizing: border-box;
    transition-property: background, border, border-color;
    transition-duration: $ms-checkbox-transition-duration;
    transition-timing-function: $ms-checkbox-transition-timing;
  }

  // The check mark icon
  .ms-Checkbox-label::after {
    @include ms-Icon--CheckMark;
    font-family: 'FabricMDL2Icons';
    display: none;
    position: absolute;
    font-weight: 900;
    background-color: transparent;
    font-size: $ms-font-size-s-plus;
    top: 0;
    color: $checkbox-check-disabled-fg;
    line-height: $ms-checkbox-label-size;
    width: $ms-checkbox-label-size;
    text-align: center;
  }

  // The checkbox label
  .ms-Checkbox-label {
    display: inline-block;
    cursor: pointer;
    margin-top: 8px;
    position: relative;
    vertical-align: top;
    user-select: none;
    min-width: $ms-checkbox-label-size;
    min-height: $ms-checkbox-label-size;
    line-height: $ms-checkbox-label-size;

    &:hover {
      &::before {
        border-color: $checkbox-check-hover-border;
      }

      .ms-Label {
        color: $checkbox-text-hover-fg;
      }
    }

    &:focus {
      &::before {
        border-color: $checkbox-check-hover-border;
      }

      &.is-disabled::before {
        border-color: $checkbox-check-disabled-bg;
      }

      &.is-checked::before {
        border-color: $checkbox-check-checked-hover-bg;
      }
    }

    &:active {
      &::before {
        border-color: $checkbox-check-hover-border;
      }

      .ms-Label {
        color: $checkbox-text-hover-fg;
      }
    }

    //== State: A checkbox is checked
    //
    &.is-checked {
      &::before {
        border: 10px solid $checkbox-check-checked-default-border;
        background-color:  $checkbox-check-checked-default-bg;

        @media screen and (-ms-high-contrast: active), (-ms-high-contrast: black-on-white) {
          display: none;
        }
      }

      &::after {
        display: block;

        @media screen and (-ms-high-contrast: active), (-ms-high-contrast: black-on-white) {
          height: $ms-checkbox-highContrast-iconBoxSize;
          width: $ms-checkbox-highContrast-iconBoxSize;
          line-height: $ms-checkbox-highContrast-iconBoxSize;
        }

        @include highContrast-border($ms-color-white, $ms-color-black);
      }

      &:hover,
      &:focus {
        &::before {
          border-color: $checkbox-check-checked-hover-bg;
        }
      }
    }

    //== State: A disabled checkbox
    //
    &.is-disabled {
      cursor: default;

      &:hover,
      &:focus {
        &::before {
          border-color: $checkbox-check-disabled-bg;
        }
      }

      &::before {
        background-color: $checkbox-check-disabled-bg;
        border-color: $checkbox-check-disabled-bg;
        color: $checkbox-check-disabled-bg;
      }

      &::after {
        @include highContrast-border($ms-color-contrastBlackDisabled, $ms-color-contrastWhiteDisabled);
        @include highContrast-color($ms-color-contrastBlackDisabled, $ms-color-contrastWhiteDisabled);
      }

      .ms-Label {
         color: $checkbox-text-disabled-fg;

        @include highContrast-color($ms-color-contrastBlackDisabled, $ms-color-contrastWhiteDisabled);
      }
    }

      //== State: A checkbox in focus
    //
    &.is-inFocus {
       &::before {
        border-color: $checkbox-check-hover-border;
      }

      &.is-disabled::before {
        border-color: $checkbox-check-disabled-bg;
      }

      &.is-checked::before {
        border-color: $checkbox-check-checked-hover-bg;
      }
    }
  }

  .is-focusVisible .ms-Checkbox.is-inFocus {
    &::before {
      content: '';
      position: absolute;
      top: 0px;
      bottom: 0px;
      @include right(0px);
      @include left(-8px);
      border: 1px solid $checkbox-focus-border;
      @include highContrast-border($ms-color-white, $ms-color-black, 1px);
    }
  }

}